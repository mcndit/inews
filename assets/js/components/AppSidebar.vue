<template>
  <aside class="app-sidebar">
    <div class="main-logo">
      <a href="/" class="main-logo__link">
        <svg class="main-logo__img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 37" width="120" height="37">
        <path id="Layer" class="shp0" fill="#74dbef" d="M6.81 10.14L0 17.05L6.81 23.96C7.44 24.59 8.45 24.59 9.07 23.97C9.69 23.33 9.69 22.31 9.07 21.68L4.75 17.3L3.44 18.13L9.07 12.42C9.38 12.11 9.53 11.7 9.53 11.28C9.53 10.87 9.38 10.45 9.07 10.14C8.45 9.51 7.44 9.51 6.81 10.14ZM25.57 10.14L32.38 17.05L25.57 23.96C24.95 24.59 23.94 24.59 23.32 23.97C22.69 23.33 22.69 22.31 23.31 21.68L27.64 17.3L28.94 18.13L23.31 12.42C23.01 12.11 22.85 11.7 22.85 11.28C22.85 10.87 23.01 10.45 23.31 10.14C23.94 9.51 24.94 9.51 25.57 10.14ZM20.11 10.7C19.96 10.31 19.67 9.98 19.26 9.81C18.45 9.45 17.51 9.82 17.17 10.63L12.19 22.18C12.02 22.58 12.03 23.02 12.18 23.41C12.33 23.79 12.62 24.12 13.03 24.3C13.84 24.66 14.78 24.29 15.12 23.47L20.1 11.93C20.27 11.52 20.26 11.08 20.11 10.7Z"></path>
        <path id="Layer" fill-rule="evenodd" class="shp1" fill="#161b2f" d="M45.05 0L45.05 21.72L49.42 21.72L50.37 21.84L50.37 19.25L55.5 16.85L55.5 27.2L39 27.2L39 0L45.05 0ZM71.09 7.66C72.23 8.03 73.21 8.62 74.03 9.43C74.86 10.25 75.5 11.3 75.97 12.59C76.44 13.88 76.68 15.44 76.68 17.27C76.68 19.1 76.44 20.66 75.97 21.95C75.5 23.24 74.86 24.3 74.03 25.11C73.21 25.92 72.23 26.51 71.09 26.88C69.95 27.25 68.72 27.43 67.4 27.43C66.06 27.43 64.82 27.25 63.69 26.88C62.56 26.51 61.59 25.92 60.76 25.11C59.94 24.3 59.29 23.24 58.83 21.95C58.36 20.66 58.12 19.1 58.12 17.27C58.12 15.47 58.36 13.93 58.83 12.65C59.29 11.37 59.94 10.32 60.76 9.49C61.59 8.67 62.56 8.07 63.69 7.69C64.82 7.31 66.06 7.11 67.4 7.11C68.72 7.11 69.95 7.3 71.09 7.66ZM67.4 22.45C68.54 22.45 69.43 22.07 70.08 21.31C70.72 20.54 71.05 19.2 71.05 17.27C71.05 15.34 70.72 13.99 70.08 13.22C69.43 12.45 68.54 12.06 67.4 12.06C66.28 12.06 65.39 12.46 64.72 13.26C64.05 14.06 63.71 15.4 63.71 17.27C63.71 19.2 64.04 20.54 64.7 21.31C65.36 22.07 66.26 22.45 67.4 22.45ZM96.29 11.79C96.47 12.15 96.6 12.53 96.67 12.95C96.75 13.37 96.78 13.78 96.78 14.19C96.78 15.1 96.64 16 96.35 16.89C96.06 17.78 95.57 18.58 94.9 19.31C94.23 20.03 93.37 20.61 92.3 21.06C91.23 21.5 89.93 21.73 88.38 21.76C88.28 21.84 88.16 21.94 88 22.08C87.85 22.22 87.78 22.38 87.78 22.56C87.78 22.76 87.92 22.91 88.21 23.02C88.51 23.12 88.79 23.18 89.07 23.21C89.5 23.26 89.95 23.3 90.42 23.34C90.89 23.38 91.34 23.42 91.77 23.47C92.76 23.57 93.63 23.8 94.39 24.14C95.15 24.48 95.78 24.92 96.29 25.45C96.8 25.98 97.19 26.59 97.45 27.28C97.72 27.96 97.85 28.7 97.85 29.48C97.85 30.85 97.59 31.99 97.07 32.89C96.55 33.79 95.87 34.5 95.04 35.02C94.2 35.54 93.24 35.89 92.17 36.08C91.09 36.27 89.98 36.33 88.84 36.25C87.93 36.21 87.02 36.05 86.12 35.8C85.22 35.55 84.37 35.23 83.56 34.85C82.75 34.47 82 34.02 81.31 33.52C80.63 33.01 80.05 32.48 79.56 31.92L82.15 28.46C82.91 29.02 83.61 29.47 84.24 29.82C84.87 30.18 85.47 30.46 86.03 30.66C86.58 30.87 87.09 31.01 87.55 31.1C88 31.19 88.44 31.26 88.84 31.31C89.22 31.33 89.61 31.33 90 31.31C90.39 31.28 90.75 31.2 91.08 31.06C91.41 30.92 91.68 30.73 91.88 30.49C92.09 30.25 92.19 29.92 92.19 29.48C92.19 28.88 91.96 28.44 91.52 28.17C91.08 27.91 90.35 27.73 89.33 27.66C88.95 27.63 88.57 27.6 88.17 27.56C87.78 27.53 87.4 27.49 87.02 27.47C85.52 27.34 84.36 26.93 83.54 26.23C82.71 25.53 82.3 24.65 82.3 23.59C82.3 23 82.41 22.48 82.64 22.01C82.87 21.54 83.2 21.05 83.63 20.54C82.41 19.81 81.51 18.88 80.91 17.75C80.32 16.62 80.02 15.44 80.02 14.23C80.02 13.24 80.21 12.31 80.59 11.43C80.97 10.56 81.52 9.8 82.24 9.15C82.97 8.5 83.85 8 84.91 7.63C85.96 7.26 87.16 7.08 88.5 7.08C89.26 7.08 90.04 7.17 90.85 7.36C91.67 7.55 92.36 7.8 92.95 8.1C92.95 8.13 93.18 8.05 93.65 7.87C94.12 7.7 94.64 7.51 95.23 7.31C95.88 7.05 96.66 6.79 97.55 6.51L97.55 10.2L96.29 11.79ZM86.71 12C86.23 12.52 85.99 13.26 85.99 14.23C85.99 15.29 86.23 16.03 86.71 16.44C87.19 16.84 87.79 17.04 88.5 17.04C89.33 17.04 89.96 16.76 90.38 16.21C90.8 15.65 91.01 14.96 91.01 14.15C91.01 13.24 90.8 12.52 90.38 12C89.96 11.48 89.35 11.22 88.54 11.22C87.8 11.22 87.19 11.48 86.71 12ZM113.59 7.66C114.73 8.03 115.71 8.62 116.53 9.43C117.36 10.25 118.01 11.3 118.47 12.59C118.94 13.88 119.18 15.44 119.18 17.27C119.18 19.1 118.94 20.66 118.47 21.95C118.01 23.24 117.36 24.3 116.53 25.11C115.71 25.92 114.73 26.51 113.59 26.88C112.45 27.25 111.22 27.43 109.9 27.43C108.56 27.43 107.32 27.25 106.19 26.88C105.07 26.51 104.09 25.92 103.27 25.11C102.44 24.3 101.8 23.24 101.33 21.95C100.86 20.66 100.63 19.1 100.63 17.27C100.63 15.47 100.86 13.93 101.33 12.65C101.8 11.37 102.44 10.32 103.27 9.49C104.09 8.67 105.07 8.07 106.19 7.69C107.32 7.31 108.56 7.11 109.9 7.11C111.22 7.11 112.45 7.3 113.59 7.66ZM112.58 21.31C113.23 20.54 113.55 19.2 113.55 17.27C113.55 15.34 113.23 13.99 112.58 13.22C111.94 12.45 111.04 12.06 109.9 12.06C108.79 12.06 107.89 12.46 107.22 13.26C106.55 14.06 106.21 15.4 106.21 17.27C106.21 19.2 106.54 20.54 107.2 21.31C107.86 22.07 108.76 22.45 109.9 22.45C111.04 22.45 111.94 22.07 112.58 21.31Z"></path>
        </svg>
      </a>
      <button ref="navbarToggler" @click="navbarActive = !navbarActive;"
          class="navbar-toggler" type="button" aria-controls="navbarCollapse"
          aria-expanded="true" aria-label="Toggle navigation">
        <span class="icon-menu-toggle"></span>
      </button>
    </div>
    <div ref="navbarDropdown">
      <app-nav class="app-nav" :navbar-active="navbarActive" :items="navbarItems" :selected="current">
        <div slot="nav-header" class="text-h5 nav-title">
          Navigation
        </div>
      </app-nav>
    </div>
  </aside>
</template>

<script>
import AppNav from './AppNav.vue';
export default {
  data () {
    return {
      navbarActive: false,
      current: 'news',
      navbarItems: [
        { url: '', title: 'Home', code: 'home' },
        { url: '/', title: 'News', code: 'news' },
        { url: '', title: 'About', code: 'about' },
        { url: '', title: 'Contact', code: 'contact' }
      ]
    }
  },
  components: { AppNav },
  mounted: function () {
    document.addEventListener('click', this.onDocumentClick);
  },
  beforeDestroy: function () {
    document.removeEventListener('click', this.onDocumentClick);
  },
  methods: {
    onDocumentClick(e){
      let el = this.$refs.navbarToggler;
      let el2 = this.$refs.navbarDropdown;
      let target = e.target;
      if (el !== target && !el.contains(target) && !el2.contains(target)) {
        this.navbarActive = false;
      }
    }
  }
}
</script>